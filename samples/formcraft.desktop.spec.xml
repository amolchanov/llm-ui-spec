<?xml version="1.0" encoding="UTF-8"?>
<!--
  FormCraft - Desktop Application Spec

  Uses desktop-native patterns:
  - Menu bar with keyboard shortcuts
  - Multi-window support
  - Toolbar with actions
  - Sidebar navigation with collapsible sections
  - Context menus (right-click)
  - Resizable panels and split views
  - Status bar
  - Dialog boxes
  - Drag and drop
-->
<desktopapp name="FormCraft" version="1.0">

  <import src="./formcraft.shared.spec.xml" />


  <!-- ==================== APP CONFIGURATION ==================== -->
  <config>
    <window prompt="title FormCraft, width 1200, height 800, min width 800, min height 600, title bar hidden" />
    <tray prompt="icon form-icon, tooltip FormCraft" />
  </config>


  <!-- ==================== GUARDS ==================== -->
  <guards>
    <guard name="auth" prompt="if not authenticated, redirect to login" />
  </guards>


  <!-- ==================== ACTIONS ==================== -->
  <actions>
    <action name="save" prompt="save current form, show success notification" />
    <action name="undo" prompt="undo last action" />
    <action name="redo" prompt="redo last undone action" />
    <action name="delete" prompt="confirm dialog, delete item, refresh" />
    <action name="duplicate" prompt="duplicate item, select new item" />
    <action name="publish" prompt="publish form, show success notification" />
    <action name="export" prompt="show export dialog, download file" />
    <action name="quit" prompt="save unsaved changes dialog, quit application" />
  </actions>


  <!-- ==================== MENU BAR ==================== -->
  <container type="menu-bar">
    <container type="menu" prompt="label File">
      <element prompt="shortcut Ctrl+N, on click open @dialog.CreateForm">New Form</element>
      <element prompt="shortcut Ctrl+O, on click @action.openFilePicker">Open...</element>
      <element type="separator" />
      <container type="menu" prompt="label Import">
        <element prompt="on click @action.importJSON">From JSON</element>
        <element prompt="on click @action.importCSV">From CSV</element>
        <element prompt="on click @action.importGoogleForms">From Google Forms</element>
      </container>
      <container type="menu" prompt="label Export">
        <element prompt="on click @action.exportJSON">As JSON</element>
        <element prompt="on click @action.exportPDF">As PDF</element>
      </container>
      <element type="separator" />
      <element prompt="shortcut Ctrl+Comma, on click open @window.Settings">Settings</element>
      <element type="separator" />
      <element prompt="shortcut Alt+F4, on click @action.quit">Exit</element>
    </container>

    <container type="menu" prompt="label Edit">
      <element prompt="shortcut Ctrl+Z, on click @action.undo, enabled @state.canUndo">Undo</element>
      <element prompt="shortcut Ctrl+Shift+Z, on click @action.redo, enabled @state.canRedo">Redo</element>
      <element type="separator" />
      <element prompt="shortcut Ctrl+X, on click @action.cut">Cut</element>
      <element prompt="shortcut Ctrl+C, on click @action.copy">Copy</element>
      <element prompt="shortcut Ctrl+V, on click @action.paste">Paste</element>
      <element prompt="shortcut Delete, on click @action.delete">Delete</element>
      <element type="separator" />
      <element prompt="shortcut Ctrl+A, on click @action.selectAll">Select All</element>
      <element prompt="shortcut Ctrl+D, on click @action.duplicate">Duplicate</element>
    </container>

    <container type="menu" prompt="label View">
      <element prompt="shortcut Ctrl+B, on click @action.toggleSidebar, checked @state.sidebarVisible">Toggle Sidebar</element>
      <element prompt="shortcut Ctrl+P, on click @action.toggleProperties, checked @state.propertiesVisible">Toggle Properties</element>
      <element type="separator" />
      <element prompt="shortcut Ctrl+Plus, on click @action.zoomIn">Zoom In</element>
      <element prompt="shortcut Ctrl+Minus, on click @action.zoomOut">Zoom Out</element>
      <element prompt="shortcut Ctrl+0, on click @action.zoomReset">Reset Zoom</element>
      <element type="separator" />
      <element prompt="shortcut F11, on click @action.toggleFullScreen">Full Screen</element>
    </container>

    <container type="menu" prompt="label Form">
      <element prompt="shortcut Ctrl+Shift+F, on click open @dialog.AddField">Add Field</element>
      <element prompt="shortcut Ctrl+Shift+P, on click open @window.Preview">Preview</element>
      <element type="separator" />
      <element prompt="shortcut Ctrl+Shift+Enter, on click @action.publish, enabled @state.canPublish">Publish</element>
      <element prompt="on click @action.unpublish, enabled @state.form.status == 'published'">Unpublish</element>
      <element type="separator" />
      <element prompt="on click open @dialog.FormSettings">Form Settings...</element>
    </container>

    <container type="menu" prompt="label Help">
      <element prompt="shortcut F1, on click @action.openDocs">Documentation</element>
      <element prompt="shortcut Ctrl+Slash, on click open @dialog.Shortcuts">Keyboard Shortcuts</element>
      <element type="separator" />
      <element prompt="on click @action.checkUpdates">Check for Updates...</element>
      <element prompt="on click open @dialog.About">About FormCraft</element>
    </container>
  </container>


  <!-- ==================== MAIN LAYOUT ==================== -->
  <layout name="MainLayout">
    <container type="column" prompt="height 100%">
      <!-- Custom Title Bar -->
      <container type="title-bar" prompt="draggable">
        <container type="row" prompt="padding small, gap medium, align center">
          <element type="icon" prompt="form, size small" />
          <element type="text" prompt="body, weight medium">FormCraft</element>
          <element type="spacer" />
          <element type="window-controls" />
        </container>
      </container>

      <!-- Toolbar -->
      <container type="toolbar">
        <container type="toolbar-group">
          <element prompt="plus icon, tooltip New Form (Ctrl+N), on click open @dialog.CreateForm" />
          <element prompt="folder-open icon, tooltip Open (Ctrl+O), on click @action.openFilePicker" />
          <element prompt="save icon, tooltip Save (Ctrl+S), on click @action.save, disabled if-not @state.isDirty" />
        </container>
        <element type="separator" />
        <container type="toolbar-group">
          <element prompt="undo icon, tooltip Undo (Ctrl+Z), on click @action.undo, disabled if-not @state.canUndo" />
          <element prompt="redo icon, tooltip Redo (Ctrl+Shift+Z), on click @action.redo, disabled if-not @state.canRedo" />
        </container>
        <element type="separator" />
        <container type="toolbar-group">
          <element prompt="eye icon, tooltip Preview (Ctrl+Shift+P), on click open @window.Preview" />
          <element prompt="share icon, tooltip Share, on click open @dialog.Share, disabled @state.form.status != 'published'" />
        </container>
        <element type="spacer" />
        <element type="search" prompt="placeholder Search forms..., width 250px, on search @action.search" />
      </container>

      <!-- Main Content Area -->
      <container type="split-view" prompt="horizontal, grow">
        <!-- Sidebar -->
        <container type="panel" prompt="width 260px, min width 200px, max width 400px, resizable, collapsible">
          <container type="column" prompt="height 100%, background gray-50">
            <!-- Navigation -->
            <container type="tree-view">
              <element prompt="home icon, selected @state.view == 'dashboard', on click @action.setView with dashboard">Dashboard</element>
              <container prompt="file-text icon, expanded">
                <container for-each="@state.forms">
                  <element prompt="file icon, selected @state.selectedForm == @item.id, on click @action.selectForm with @item.id, context menu @context-menu.FormItem" use="@item.name" />
                </container>
              </container>
              <element prompt="inbox icon, badge @state.unreadCount, on click @action.setView with submissions">Submissions</element>
              <element prompt="bar-chart icon, on click @action.setView with analytics">Analytics</element>
            </container>

            <element type="spacer" />

            <!-- User Section -->
            <container prompt="padding medium, border top">
              <container type="row" prompt="gap small, align center">
                <element type="@component.Avatar" prompt="src @state.user.avatar, name @state.user.name, size small" />
                <container type="column" prompt="grow">
                  <element type="text" prompt="body, weight medium, truncate" use="@state.user.name" />
                  <element type="text" prompt="caption, muted" use="@state.user.plan" />
                </container>
                <element type="button" prompt="settings icon, style ghost, size small, on click open @window.Settings" />
              </container>
            </container>
          </container>
        </container>

        <!-- Main Content -->
        <container type="panel" prompt="grow">
          <slot name="content" />
        </container>

        <!-- Properties Panel -->
        <container type="panel" prompt="width 300px, min width 250px, max width 450px, resizable, collapsible, visible @state.propertiesVisible">
          <slot name="properties" />
        </container>
      </container>

      <!-- Status Bar -->
      <container type="status-bar">
        <element type="text" prompt="caption">{@state.form.fields.length} fields</element>
        <element type="text" prompt="caption">{@state.form.submissions.length} submissions</element>
        <element type="spacer" />
        <element type="badge" use="@state.form.status" prompt="size extra-small" />
        <element type="text" prompt="caption, muted" if="@state.isDirty">Unsaved changes</element>
        <element type="text" prompt="caption, muted" if-not="@state.isDirty">Saved</element>
      </container>
    </container>
  </layout>


  <!-- ==================== VIEWS ==================== -->
  <views>

    <!-- Dashboard View -->
    <view name="Dashboard">
      <data>
        <query name="forms" type="@entity.Form[]" prompt="filter owner == @auth.user, order by updatedAt desc, limit 10" />
        <query name="stats" prompt="source api/analytics/overview" />
      </data>

      <container type="scroll" prompt="padding large">
        <container type="column" prompt="gap large, max width 1200px">
          <element type="text" prompt="heading1">Dashboard</element>

          <!-- Stats Row -->
          <container type="grid" prompt="4 columns, gap medium">
            <element type="@component.StatCard" prompt="label Total Forms, value @state.stats.totalForms, icon file-text" />
            <element type="@component.StatCard" prompt="label Submissions, value @state.stats.totalSubmissions, icon inbox, trend @state.stats.submissionsTrend, trendLabel vs last week" />
            <element type="@component.StatCard" prompt="label Completion Rate, value @state.stats.completionRate, icon check-circle" />
            <element type="@component.StatCard" prompt="label Active Forms, value @state.stats.activeForms, icon activity" />
          </container>

          <!-- Recent Forms -->
          <container type="column">
            <container type="row" prompt="justify between, align center, margin bottom medium">
              <element type="text" prompt="heading2">Recent Forms</element>
              <element type="button" prompt="style text, on click @action.setView with forms">View All</element>
            </container>

            <container type="grid" prompt="3 columns, gap medium" for-each="@state.forms | limit(6)">
              <element type="@component.FormCard" prompt="
                on click @action.selectForm with @item.id,
                on double-click open @window.FormEditor with id @item.id,
                context menu @context-menu.FormItem
              " />
            </container>
          </container>

          <!-- Recent Activity -->
          <container type="column">
            <element type="text" prompt="heading2, margin bottom medium">Recent Submissions</element>
            <container type="card">
              <container type="table">
                <container prompt="header">
                  <element>Form</element>
                  <element>Response</element>
                  <element>Date</element>
                  <element prompt="width 50px"></element>
                </container>
                <container prompt="body" for-each="@state.recentSubmissions">
                  <container prompt="interactive, on double-click open @dialog.SubmissionDetail with id @item.id">
                    <container type="row" prompt="gap small, align center">
                      <container prompt="width 8px, height 8px, border radius full, background primary" if-not="@item.isRead" />
                      <element type="text" use="@item.form.name" />
                    </container>
                    <element type="text" prompt="muted">{summarize(@item.data, 50)}</element>
                    <element type="text" prompt="muted, format relative" use="@item.createdAt" />
                    <element type="button" prompt="more-horizontal icon, style ghost, size small, on click show @context-menu.Submission with @item" />
                  </container>
                </container>
              </container>
            </container>
          </container>
        </container>
      </container>
    </view>


    <!-- Form Editor View -->
    <view name="FormEditor" prompt="param id">
      <data>
        <query name="form" type="@entity.Form" prompt="filter id == @param.id, include fields, settings" />
      </data>

      <slot name="content">
        <container type="split-view" prompt="horizontal">
          <!-- Field Palette -->
          <container type="panel" prompt="width 220px, border right">
            <container type="column" prompt="padding medium, gap small">
              <element type="text" prompt="subtitle, margin bottom small">Add Field</element>

              <element type="text" prompt="caption, muted, margin top small">Basic</element>
              <container type="draggable" prompt="type field, data type text">
                <container prompt="outline, padding small, interactive">
                  <container type="row" prompt="gap small, align center">
                    <element type="icon" prompt="type, size small" />
                    <element type="text" prompt="body">Text</element>
                  </container>
                </container>
              </container>
              <container type="draggable" prompt="type field, data type email">
                <container prompt="outline, padding small, interactive">
                  <container type="row" prompt="gap small, align center">
                    <element type="icon" prompt="mail, size small" />
                    <element type="text" prompt="body">Email</element>
                  </container>
                </container>
              </container>
              <container type="draggable" prompt="type field, data type number">
                <container prompt="outline, padding small, interactive">
                  <container type="row" prompt="gap small, align center">
                    <element type="icon" prompt="hash, size small" />
                    <element type="text" prompt="body">Number</element>
                  </container>
                </container>
              </container>

              <element type="text" prompt="caption, muted, margin top small">Choice</element>
              <container type="draggable" prompt="type field, data type select">
                <container prompt="outline, padding small, interactive">
                  <container type="row" prompt="gap small, align center">
                    <element type="icon" prompt="chevron-down, size small" />
                    <element type="text" prompt="body">Dropdown</element>
                  </container>
                </container>
              </container>
              <container type="draggable" prompt="type field, data type checkbox">
                <container prompt="outline, padding small, interactive">
                  <container type="row" prompt="gap small, align center">
                    <element type="icon" prompt="check-square, size small" />
                    <element type="text" prompt="body">Checkbox</element>
                  </container>
                </container>
              </container>

              <element type="text" prompt="caption, muted, margin top small">Advanced</element>
              <container type="draggable" prompt="type field, data type date">
                <container prompt="outline, padding small, interactive">
                  <container type="row" prompt="gap small, align center">
                    <element type="icon" prompt="calendar, size small" />
                    <element type="text" prompt="body">Date</element>
                  </container>
                </container>
              </container>
              <container type="draggable" prompt="type field, data type file">
                <container prompt="outline, padding small, interactive">
                  <container type="row" prompt="gap small, align center">
                    <element type="icon" prompt="upload, size small" />
                    <element type="text" prompt="body">File Upload</element>
                  </container>
                </container>
              </container>
            </container>
          </container>

          <!-- Form Canvas -->
          <container type="panel" prompt="grow">
            <container type="scroll" prompt="padding large">
              <container type="column" prompt="max width 600px, margin auto, gap medium">
                <!-- Form Header -->
                <element type="input" prompt="variant ghost, size extra-large, placeholder Form Title, on change @action.updateFormName" use="@state.form.name" />
                <element type="input" prompt="variant ghost, placeholder Add a description..., on change @action.updateFormDescription" use="@state.form.description" />

                <!-- Fields -->
                <container type="drop-zone" prompt="accept field, on drop @action.addFieldAt" for-each="@state.form.fields">
                  <container type="draggable" prompt="type field, reorderable">
                    <container type="card" prompt="
                      padding medium,
                      selected @state.selectedField == @item.id,
                      on click @action.selectField with @item.id,
                      on double-click focus properties panel,
                      context menu @context-menu.Field
                    ">
                      <container type="column" prompt="gap small">
                        <container type="row" prompt="gap extra-small, align center">
                          <element type="text" prompt="body, weight medium" use="@item.label" />
                          <element type="text" prompt="color danger" if="@item.required">*</element>
                        </container>
                        <prompt>Render appropriate field preview based on @item.type</prompt>
                      </container>
                    </container>
                  </container>
                </container>

                <!-- Empty State -->
                <container prompt="padding extra-large, border dashed, border radius medium, align center" if-not="@state.form.fields.length">
                  <container type="column" prompt="align center, gap medium">
                    <element type="icon" prompt="plus-circle, size extra-large, muted" />
                    <element type="text" prompt="body, muted">Drag fields here or click to add</element>
                    <element type="button" prompt="style outline, on click open @dialog.AddField">Add Field</element>
                  </container>
                </container>
              </container>
            </container>
          </container>
        </container>
      </slot>

      <!-- Properties Panel -->
      <slot name="properties">
        <container type="column" prompt="padding medium, gap medium" if="@state.selectedField">
          <container type="row" prompt="justify between, align center">
            <element type="text" prompt="subtitle">Field Properties</element>
            <element type="button" prompt="x icon, style ghost, size small, on click @action.selectField with null" />
          </container>

          <container type="form" prompt="on change @action.updateField">
            <container type="column" prompt="gap medium">
              <element type="input" prompt="required">Label</element>
              <element type="input">Placeholder</element>
              <element type="textarea" prompt="rows 2">Help Text</element>
              <element type="switch">Required</element>

              <element type="separator" />
              <element type="button" prompt="style outline, style danger, trash icon, on click @action.deleteField">Delete Field</element>
            </container>
          </container>
        </container>
        <container type="column" prompt="padding medium, align center, justify center, height 100%" if-not="@state.selectedField">
          <element type="text" prompt="body, muted">Select a field to edit properties</element>
        </container>
      </slot>
    </view>

  </views>


  <!-- ==================== WINDOWS ==================== -->
  <windows>

    <!-- Settings Window -->
    <window name="Settings" prompt="title Settings, width 700, height 500, resizable false">
      <container type="row" prompt="height 100%">
        <!-- Settings Navigation -->
        <container type="column" prompt="width 200px, background gray-50, padding medium, gap extra-small">
          <element type="text" prompt="caption, muted, margin bottom small">SETTINGS</element>
          <element type="button" prompt="style @state.settingsTab == 'general' ? 'subtle' : 'ghost', align left, on click @action.setSettingsTab with general">General</element>
          <element type="button" prompt="style @state.settingsTab == 'account' ? 'subtle' : 'ghost', align left, on click @action.setSettingsTab with account">Account</element>
          <element type="button" prompt="style @state.settingsTab == 'appearance' ? 'subtle' : 'ghost', align left, on click @action.setSettingsTab with appearance">Appearance</element>
          <element type="button" prompt="style @state.settingsTab == 'api' ? 'subtle' : 'ghost', align left, on click @action.setSettingsTab with api">API Keys</element>
          <element type="button" prompt="style @state.settingsTab == 'billing' ? 'subtle' : 'ghost', align left, on click @action.setSettingsTab with billing">Billing</element>
        </container>

        <!-- Settings Content -->
        <container type="column" prompt="grow, padding large">
          <container if="@state.settingsTab == 'appearance'">
            <container type="column" prompt="gap medium">
              <element type="text" prompt="heading2">Appearance</element>
              <container type="row" prompt="gap large">
                <container type="column" prompt="gap extra-small">
                  <element type="text" prompt="body">Theme</element>
                  <container type="row" prompt="segmented control">
                    <element prompt="value light">Light</element>
                    <element prompt="value dark">Dark</element>
                    <element prompt="value system">System</element>
                  </container>
                </container>
              </container>
              <element type="switch">Compact mode</element>
              <element type="switch">Show toolbar</element>
            </container>
          </container>
          <prompt if="@state.settingsTab == 'general'">General settings: default form settings, language, timezone</prompt>
          <prompt if="@state.settingsTab == 'account'">Account settings: profile, email, password, delete account</prompt>
          <prompt if="@state.settingsTab == 'api'">API keys management with create, copy, delete</prompt>
          <prompt if="@state.settingsTab == 'billing'">Billing: current plan, upgrade, payment method, invoices</prompt>
        </container>
      </container>
    </window>


    <!-- Preview Window -->
    <window name="Preview" prompt="title Form Preview - @state.form.name, width 500, height 700">
      <container type="column" prompt="height 100%">
        <container type="toolbar">
          <container type="toolbar-group">
            <element prompt="smartphone icon, tooltip Mobile View, on click @action.setPreviewSize with mobile, active @state.previewSize == 'mobile'" />
            <element prompt="tablet icon, tooltip Tablet View, on click @action.setPreviewSize with tablet, active @state.previewSize == 'tablet'" />
            <element prompt="monitor icon, tooltip Desktop View, on click @action.setPreviewSize with desktop, active @state.previewSize == 'desktop'" />
          </container>
          <element type="spacer" />
          <element prompt="external-link icon, tooltip Open in Browser, on click @action.openInBrowser" />
        </container>

        <container prompt="grow, background gray-100, padding medium, align center">
          <container prompt="
            width @state.previewSize == 'mobile' ? '375px' : (@state.previewSize == 'tablet' ? '768px' : '100%'),
            height 100%,
            background white,
            border radius medium,
            shadow large,
            overflow auto
          ">
            <prompt>Render the form preview with all fields and styling</prompt>
          </container>
        </container>
      </container>
    </window>

  </windows>


  <!-- ==================== DIALOGS ==================== -->
  <dialogs>

    <!-- Create Form Dialog -->
    <dialog name="CreateForm" prompt="title Create New Form, width 450">
      <container type="form" prompt="on submit @action.createForm, on success close dialog">
        <container type="column" prompt="gap medium, padding large">
          <element type="input" prompt="required, placeholder e.g. Contact Form, auto focus">Form Name</element>
          <element type="textarea" prompt="rows 2, placeholder Optional description...">Description</element>

          <element type="text" prompt="caption, muted, margin top medium">Or start from a template:</element>
          <container type="grid" prompt="3 columns, gap small" for-each="@state.templates">
            <container prompt="
              outline,
              padding medium,
              interactive,
              selected @state.selectedTemplate == @item.id,
              on click @action.selectTemplate with @item.id
            ">
              <container type="column" prompt="align center, gap extra-small">
                <element type="icon" use="@item.icon" prompt="size large, color primary" />
                <element type="text" prompt="caption, align center" use="@item.name" />
              </container>
            </container>
          </container>

          <container type="row" prompt="justify end, gap small, margin top medium">
            <element type="button" prompt="style outline, on click close dialog">Cancel</element>
            <element type="button" prompt="style primary, type submit">Create</element>
          </container>
        </container>
      </container>
    </dialog>


    <!-- Share Dialog -->
    <dialog name="Share" prompt="title Share Form, width 500">
      <container type="column" prompt="gap medium, padding large">
        <container type="card" prompt="padding medium">
          <container type="column" prompt="gap small">
            <element type="text" prompt="caption, muted">Form Link</element>
            <container type="row" prompt="gap small">
              <element type="input" prompt="read only, grow" use="@state.form.publicUrl" />
              <element type="button" prompt="copy icon, tooltip Copy to clipboard, on click @action.copyLink" />
              <element type="button" prompt="external-link icon, tooltip Open in browser, on click @action.openInBrowser" />
            </container>
          </container>
        </container>

        <container type="card" prompt="padding medium">
          <container type="column" prompt="gap small">
            <element type="text" prompt="caption, muted">Embed Code</element>
            <element type="textarea" prompt="read only, rows 3, font mono" use="@state.embedCode" />
            <element type="button" prompt="style outline, size small, copy icon, on click @action.copyEmbed">Copy Embed Code</element>
          </container>
        </container>

        <container type="row" prompt="justify end, margin top medium">
          <element type="button" prompt="on click close dialog">Done</element>
        </container>
      </container>
    </dialog>


    <!-- About Dialog -->
    <dialog name="About" prompt="title About FormCraft, width 400">
      <container type="column" prompt="align center, gap medium, padding extra-large">
        <element type="icon" prompt="form, size extra-large, color primary" />
        <element type="text" prompt="heading2">FormCraft</element>
        <element type="text" prompt="body, muted">Version 1.0.0</element>
        <element type="text" prompt="caption, muted, align center">
          A powerful form builder for creating beautiful, functional forms.
        </element>
        <container type="row" prompt="gap medium, margin top medium">
          <element type="button" prompt="style text, on click @action.openWebsite">Website</element>
          <element type="button" prompt="style text, on click @action.openDocs">Documentation</element>
        </container>
        <element type="button" prompt="style outline, on click close dialog, margin top medium">Close</element>
      </container>
    </dialog>

  </dialogs>


  <!-- ==================== CONTEXT MENUS ==================== -->
  <context-menus>

    <context-menu name="FormItem">
      <element prompt="edit icon, on click open @window.FormEditor with id @context.id">Edit</element>
      <element prompt="eye icon, on click open @window.Preview with id @context.id">Preview</element>
      <element type="separator" />
      <element prompt="copy icon, on click @action.duplicate with @context.id">Duplicate</element>
      <element prompt="share icon, on click open @dialog.Share with id @context.id, enabled @context.status == 'published'">Share</element>
      <element type="separator" />
      <element prompt="archive icon, on click @action.archive with @context.id">Archive</element>
      <element prompt="trash icon, style danger, on click @action.confirmDelete with @context.id">Delete</element>
    </context-menu>

    <context-menu name="Field">
      <element prompt="copy icon, shortcut Ctrl+D, on click @action.duplicateField with @context.id">Duplicate</element>
      <element type="separator" />
      <element prompt="arrow-up icon, on click @action.moveFieldUp with @context.id, enabled @context.index > 0">Move Up</element>
      <element prompt="arrow-down icon, on click @action.moveFieldDown with @context.id, enabled @context.index < @state.form.fields.length - 1">Move Down</element>
      <element type="separator" />
      <element prompt="trash icon, style danger, shortcut Delete, on click @action.deleteField with @context.id">Delete</element>
    </context-menu>

    <context-menu name="Submission">
      <element prompt="eye icon, on click open @dialog.SubmissionDetail with id @context.id">View Details</element>
      <element prompt="check icon, on click @action.markAsRead with @context.id, enabled if-not @context.isRead">Mark as Read</element>
      <element type="separator" />
      <element prompt="download icon, on click @action.exportSubmission with @context.id">Export</element>
      <element type="separator" />
      <element prompt="alert-triangle icon, on click @action.markAsSpam with @context.id">Mark as Spam</element>
      <element prompt="trash icon, style danger, on click @action.deleteSubmission with @context.id">Delete</element>
    </context-menu>

  </context-menus>

</desktopapp>
