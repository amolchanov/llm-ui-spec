<?xml version="1.0" encoding="UTF-8"?>
<spec type="entities" name="FormCraft">

  <entity name="User">
    <field name="id" type="uuid" />
    <field name="email" type="email" prompt="required" />
    <field name="name" type="string" prompt="required" />
    <field name="avatar" type="image" />
    <field name="plan" type="enum" prompt="values free, pro, enterprise; default free" />
    <field name="createdAt" type="datetime" />
    <field name="forms" type="ref" prompt="references @entity.Form, many" />
    <field name="apiKeys" type="ref" prompt="references @entity.ApiKey, many" />
  </entity>

  <entity name="Form">
    <field name="id" type="uuid" />
    <field name="name" type="string" prompt="required" />
    <field name="description" type="text" />
    <field name="slug" type="string" prompt="unique" />
    <field name="fields" type="ref" prompt="references @entity.FormField, many, ordered" />
    <field name="settings" type="ref" prompt="references @entity.FormSettings, one" />
    <field name="owner" type="ref" prompt="references @entity.User, one" />
    <field name="submissions" type="ref" prompt="references @entity.Submission, many" />
    <field name="status" type="enum" prompt="values draft, published, archived; default draft" />
    <field name="createdAt" type="datetime" />
    <field name="updatedAt" type="datetime" />
    <field name="publishedAt" type="datetime" />
  </entity>

  <entity name="FormField">
    <field name="id" type="uuid" />
    <field name="type" type="enum" prompt="values text, email, number, phone, textarea, select, radio, checkbox, date, time, file, signature, rating, hidden" />
    <field name="label" type="string" prompt="required" />
    <field name="placeholder" type="string" />
    <field name="helpText" type="string" />
    <field name="required" type="boolean" prompt="default false" />
    <field name="validation" type="json" />
    <field name="options" type="json" />
    <field name="conditionalLogic" type="json" />
    <field name="order" type="integer" />
  </entity>

  <entity name="FormSettings">
    <field name="id" type="uuid" />
    <field name="submitButtonText" type="string" prompt="default Submit" />
    <field name="successMessage" type="text" />
    <field name="redirectUrl" type="url" />
    <field name="notifyEmail" type="email" />
    <field name="enableCaptcha" type="boolean" prompt="default false" />
    <field name="allowMultipleSubmissions" type="boolean" prompt="default true" />
    <field name="closeAfterDate" type="datetime" />
    <field name="maxSubmissions" type="integer" />
    <field name="customCss" type="text" />
    <field name="webhookUrl" type="url" />
  </entity>

  <entity name="Submission">
    <field name="id" type="uuid" />
    <field name="form" type="ref" prompt="references @entity.Form" />
    <field name="data" type="json" />
    <field name="metadata" type="json" />
    <field name="ipAddress" type="string" />
    <field name="userAgent" type="string" />
    <field name="createdAt" type="datetime" />
    <field name="isRead" type="boolean" prompt="default false" />
    <field name="isSpam" type="boolean" prompt="default false" />
  </entity>

  <entity name="ApiKey">
    <field name="id" type="uuid" />
    <field name="name" type="string" prompt="required" />
    <field name="key" type="string" />
    <field name="permissions" type="enum" prompt="values read, write, admin" />
    <field name="lastUsedAt" type="datetime" />
    <field name="createdAt" type="datetime" />
  </entity>

</spec>
